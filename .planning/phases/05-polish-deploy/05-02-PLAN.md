---
phase: 05-polish-deploy
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/sections/CountdownSection.tsx
  - src/components/sections/TimelineSection.tsx
  - src/components/sections/MapSection.tsx
  - src/components/sections/RSVPSection.tsx
  - src/components/sections/DresscodeSection.tsx
  - src/components/sections/InfoSection.tsx
  - src/app/globals.css
autonomous: true
requirements:
  - DEPLOY-03

must_haves:
  truths:
    - "Все секции корректно отображаются на экране 320px шириной без горизонтального скролла"
    - "Текст в Hero читаем на 320px: уменьшенные размеры шрифтов"
    - "Countdown карточки помещаются в 320px без переполнения"
    - "Карта Яндекс уменьшенной высоты на мобилке (~200px)"
    - "Таймлайн корректно отображается на 320px с достаточным отступом от линии"
  artifacts:
    - path: "src/components/sections/CountdownSection.tsx"
      provides: "Countdown cards fitting 320px grid"
    - path: "src/components/sections/MapSection.tsx"
      provides: "Responsive map height 200px mobile / 350px desktop"
      contains: "h-[200px]"
    - path: "src/app/globals.css"
      provides: "overflow-x hidden safety net"
      contains: "overflow-x"
  key_links:
    - from: "all section components"
      to: "320px viewport"
      via: "Tailwind responsive classes"
      pattern: "text-2xl|text-xl|h-\\[200px\\]"
---

<objective>
Audit and fix all section components for 320px minimum viewport width — no horizontal scroll, readable text, properly sized elements.

Purpose: Ensure the wedding invitation works perfectly on the smallest mobile screens (DEPLOY-03).
Output: All 8 sections render correctly at 320px width with appropriate font sizes, spacing, and element sizing.
</objective>

<execution_context>
@C:/Users/user/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/user/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/components/sections/HeroSection.tsx
@src/components/sections/CountdownSection.tsx
@src/components/sections/TimelineSection.tsx
@src/components/sections/MapSection.tsx
@src/components/sections/RSVPSection.tsx
@src/components/sections/DresscodeSection.tsx
@src/components/sections/InfoSection.tsx
@src/components/sections/FooterSection.tsx
@src/components/ui/Container.tsx
@src/app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Countdown and Timeline sections for 320px</name>
  <files>src/components/sections/CountdownSection.tsx, src/components/sections/TimelineSection.tsx</files>
  <action>
Per user decision: шрифты — два фиксированных размера через Tailwind breakpoints (`text-2xl md:text-5xl`), не fluid typography.

Note: HeroSection 320px fixes are handled in Plan 05-01 (which already modifies HeroSection for next/image). This task covers remaining sections.

**CountdownSection.tsx — cards at 320px:**
Per Claude's discretion for 320px countdown cards:
- Current grid: `grid-cols-2 gap-3 sm:flex sm:justify-center sm:gap-6` — at 320px with px-4 (Container), available width = 288px, each card ≈ 138px minus gap. Check if padding `p-6` is too wide.
- Reduce card padding from `p-6` → `p-4 md:p-6` for smaller screens
- Reduce number font from `text-4xl sm:text-5xl` → `text-3xl md:text-5xl` for 320px fit
- These changes apply in BOTH the reduced-motion and normal variants (there are two CountdownCard render paths and two grid containers)

**TimelineSection.tsx — mobile layout at 320px:**
Per Claude's discretion for timeline on 320px:
- Current mobile: `ml-12` with line at `left-4`. At 320px with px-4 Container → 288px available, 48px for ml-12 leaves 240px for card. This should fit, but verify Card padding doesn't cause overflow.
- Reduce icon circle size slightly if needed, or keep current — `left-4 w-8 h-8` at 320px is fine
- The mobile layout (`md:hidden ml-12`) should work at 320px, but reduce `ml-12` → `ml-10` to give cards slightly more room
- Ensure Card component text doesn't overflow: check `text-lg` title — change to `text-base md:text-lg` for timeline event titles
  </action>
  <verify>
Run `npm run dev`, open DevTools, toggle device toolbar to 320px width (iPhone SE or custom 320×568). Verify:
1. Countdown: all 4 cards visible in 2×2 grid, numbers and labels fully visible
2. Timeline: all events readable, cards don't overflow container, vertical line visible
No horizontal scrollbar on the page.
  </verify>
  <done>
Hero text sizes are `text-2xl md:text-5xl` (handled in Plan 05-01), countdown cards fit in 320px 2×2 grid without overflow, timeline events display without horizontal scroll at 320px.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix Map, RSVP, Dresscode, Info, Footer sections for 320px</name>
  <files>src/components/sections/MapSection.tsx, src/components/sections/RSVPSection.tsx, src/components/sections/DresscodeSection.tsx, src/components/sections/InfoSection.tsx, src/app/globals.css</files>
  <action>
**MapSection.tsx — responsive height:**
Per user decision: карта Яндекс — уменьшенная высота на мобилке (~200px) vs десктоп (~350px).
- Change iframe `height="400"` → remove the height attribute, use Tailwind classes instead
- Add responsive height class to iframe: `className="block w-full h-[200px] md:h-[350px]"`
- The route button text and icon are fine at 320px (inline-flex wraps naturally)

**RSVPSection.tsx — 320px form fit:**
- Current form has `max-w-md mx-auto` which at 320px with Container px-4 = 288px available. `max-w-md` = 448px is fine (constrained by container).
- Radio button labels: current `px-4 py-3` — check total width. The text "Приду с парой (+1)" at 320px with px-4 Container → should fit. Keep as-is but verify.
- Submit button: `py-3 px-8 text-lg` — reduce to `py-3 px-6 text-base md:text-lg` for 320px
- Re-submission confirmation buttons `flex gap-3`: at narrow screens buttons might wrap. Add `flex-wrap` or reduce padding: `px-3 py-2 text-xs md:text-sm`

**DresscodeSection.tsx — palette circles at 320px:**
- Current: `flex justify-center gap-6 flex-wrap` with 5 swatches. At 320px, 5 circles (56px each) + gaps won't fit in one row → `flex-wrap` handles this. But `gap-6` (24px) might be too wide.
- Reduce gap: `gap-4 md:gap-6` for tighter spacing on mobile
- Swatch size `w-14 h-14 sm:w-16 sm:h-16` is fine at 320px (56px fits 4 per row with gap-4)
- Description text `text-lg` → `text-base md:text-lg` for better readability at 320px

**InfoSection.tsx — cards at 320px:**
- Current: stacked cards in `space-y-6`, icon size 44. At 320px this should fit fine.
- Icon size 44 at 320px is proportionally large. Reduce to `size={36}` on mobile is optional but keeps balance. Use responsive: keep 44 as it's decorative and fine.
- Text `text-xl` title → `text-lg md:text-xl` for info card titles
- No critical 320px issues — stacked single-column layout works naturally

**globals.css — safety:**
- Add `overflow-x: hidden` to `body` as a safety net against any horizontal overflow: `overflow-x: hidden`
- This prevents horizontal scroll from any element accidentally extending beyond viewport
- Place it in the existing body rule

**FooterSection.tsx:**
- Already minimal. No 320px issues (centered text, small font).
  </action>
  <verify>
Run `npm run dev`, open DevTools at 320px width. Scroll through entire page:
1. Map: shorter height (~200px) on mobile, full route button visible
2. RSVP: form inputs and buttons don't overflow, radio labels fully readable
3. Dresscode: palette circles wrap neatly, description text readable
4. Info: cards fully visible, icons and text proportional
5. Footer: unchanged, fits at 320px
6. NO horizontal scrollbar appears at any point during scroll
Run `npm run build` — no errors.
  </verify>
  <done>
All sections render correctly at 320px. Map height is 200px on mobile / 350px on desktop. No horizontal scroll on any section. RSVP form elements fit within 320px viewport. Dresscode palette wraps with tighter gap on mobile.
  </done>
</task>

</tasks>

<verification>
1. Set browser viewport to 320px width and scroll through all 8 sections — no horizontal overflow
2. All text is readable at 320px (no truncation, no tiny unreadable fonts)
3. Map iframe shows at reduced height on mobile
4. Countdown 2×2 grid has no overflow at 320px
5. `npm run build` passes
</verification>

<success_criteria>
- Zero horizontal scroll at 320px viewport width
- All text readable: minimum ~14px effective size on smallest screens
- Hero: text-2xl on mobile, text-5xl on md+ (per user decision)
- Map: ~200px height mobile, ~350px desktop (per user decision)
- Countdown cards, timeline, dresscode palette — all fit within 320px container
</success_criteria>

<output>
After completion, create `.planning/phases/05-polish-deploy/05-02-SUMMARY.md`
</output>

# Phase 4: External Integrations (Внешние интеграции) - Context

**Gathered:** 2026-02-22
**Status:** Ready for planning

<domain>
## Phase Boundary

Работающая карта Яндекс.Карт (iframe) и RSVP-форма с отправкой данных через EmailJS. Две интерактивные секции, где сайт выполняет действия, а не просто отображает контент. Персонализация, галерея, деплой — отдельные фазы.

</domain>

<decisions>
## Implementation Decisions

### Секция карты
- Карта внутри Container с скруглёнными углами, как остальные секции (не полноэкранная полоса)
- Над картой — заголовок секции с названием площадки и адресом (SectionHeading)
- Кнопка «Построить маршрут» под iframe, открывает Яндекс.Карты/Google Maps в новой вкладке
- Fallback при незагрузке iframe не нужен — адрес и кнопка маршрута всё равно видны над/под картой

### RSVP-форма: поля и поведение
- Три варианта участия: «Приду» / «Приду с парой (+1)» / «Не смогу прийти»
- Поле «Пожелания» — необязательный textarea с placeholder «Напишите пожелания паре...»
- Минимальная валидация имени — не пустое, хотя бы 2 символа
- Повторная отправка разрешена с предупреждением «Вы уже отправляли ответ. Отправить новый?» через localStorage

### Обратная связь формы
- Загрузка: текст кнопки меняется на «Отправка...» + спиннер, форма заблокирована (disabled)
- Успех: форма заменяется на сообщение «Спасибо, [Имя]! Ваш ответ принят» с галочкой
- Ошибка: toast-уведомление с ошибкой, форма остаётся заполненной для повторной попытки
- Если EmailJS недоступен — показать ошибку и предложить связаться напрямую (ссылка на мессенджер)

### Визуальный стиль секций
- Карта и RSVP — две отдельные секции с SectionHeading (стандартный стиль как все остальные)
- Порядок на странице: ...Timeline → RSVP → Карта → Footer
- RSVP-форма на приподнятой Card с тенью

### Claude's Discretion
- Конкретный формат iframe URL для Яндекс.Карт
- Выбор toast-библиотеки для уведомлений об ошибке (или нативная реализация)
- Точные отступы и spacing внутри секций
- Дизайн спиннера загрузки
- Стиль сообщения об успехе (иконка, анимация появления)

</decisions>

<specifics>
## Specific Ideas

- Порядок секций нестандартный: RSVP перед картой — гость сначала принимает решение, потом видит маршрут
- localStorage используется для двух целей: (1) предупреждение о повторной отправке, (2) запоминание что форма уже отправлена для показа «Спасибо» при повторном визите
- Кнопка маршрута должна определять платформу и открывать Яндекс.Навигатор на мобильном / Яндекс.Карты на десктопе (или Google Maps как fallback)

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 04-external-integrations*
*Context gathered: 2026-02-22*

---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - next.config.ts
  - tailwind.config.ts
  - postcss.config.mjs
  - src/app/layout.tsx
  - src/app/page.tsx
  - src/app/globals.css
  - src/lib/types.ts
  - src/lib/fonts.ts
  - public/textures/paper.png
autonomous: true
requirements:
  - FOUND-01
  - FOUND-02
  - FOUND-04

must_haves:
  truths:
    - "npm run dev запускает проект без ошибок — главная страница рендерится в браузере"
    - "Шрифт Calmius Extra Light загружается без мерцания (FOUT)"
    - "TypeScript-типы (WeddingData, TimelineEvent, RSVPFormData и др.) экспортируются из src/lib/types.ts"
    - "Глобальные стили задают кремовый фон, бумажную текстуру и тёмно-коричневый текст"
  artifacts:
    - path: "src/app/layout.tsx"
      provides: "Root layout with font, metadata, global styles"
      contains: "Calmius"
    - path: "src/app/page.tsx"
      provides: "Main page shell"
      min_lines: 5
    - path: "src/lib/types.ts"
      provides: "All TypeScript types for wedding data"
      exports: ["WeddingData", "TimelineEvent", "RSVPFormData", "HeroData", "InfoCard", "DressCodeData", "CountdownData", "MapData", "FooterData", "ContactInfo", "ColorSwatch", "SectionId"]
    - path: "src/lib/fonts.ts"
      provides: "Font configuration export"
      exports: ["calmius"]
    - path: "src/app/globals.css"
      provides: "Global styles with Tailwind, colors, texture"
      contains: "@tailwind"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/lib/fonts.ts"
      via: "font import and className application"
      pattern: "calmius"
    - from: "src/app/layout.tsx"
      to: "src/app/globals.css"
      via: "CSS import"
      pattern: "globals.css"
---

<objective>
Initialize the Next.js 15 project with TypeScript, Tailwind CSS 4, configure the Calmius Extra Light font, set up global visual styles (cream background, paper texture, dark chocolate text), and create all TypeScript type definitions for the wedding data model.

Purpose: Establish the project skeleton and type system that all subsequent phases build upon.
Output: Running Next.js 15 app with configured fonts, global styles matching the "paper invitation" aesthetic, and complete TypeScript types.
</objective>

<execution_context>
@C:/Users/user/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/user/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js 15 project with Tailwind CSS 4 and configure fonts + global styles</name>
  <files>
    package.json
    tsconfig.json
    next.config.ts
    tailwind.config.ts
    postcss.config.mjs
    src/app/layout.tsx
    src/app/page.tsx
    src/app/globals.css
    src/lib/fonts.ts
    public/textures/paper.png
  </files>
  <action>
    1. **Create Next.js 15 project** using `npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --use-npm` (run in project root; if prompted about existing files, accept overwrite).

    2. **Verify Tailwind CSS 4 setup**: Next.js 15 with `create-next-app@latest` should install Tailwind CSS v4. Verify in package.json. If v3 is installed, upgrade: `npm install tailwindcss@latest @tailwindcss/postcss@latest`. Tailwind CSS 4 uses CSS-based config, not JS — but keep `tailwind.config.ts` for theme extensions.

    3. **Configure `tailwind.config.ts`** with the wedding color palette per CONTEXT.md decisions:
       ```ts
       // Colors from CONTEXT.md (LOCKED decisions):
       // Основной акцент: Александрит #598c74
       // Основной текст: Тёмный шоколад #3C1518
       // Фон: Тёплый кремовый #FFF8F0
       theme: {
         extend: {
           colors: {
             alexandrite: {
               DEFAULT: '#598c74',
               light: 'rgba(89, 140, 116, 0.15)', // for decorative lines, inactive dots
               medium: 'rgba(89, 140, 116, 0.3)',
             },
             chocolate: {
               DEFAULT: '#3C1518',
               light: 'rgba(60, 21, 24, 0.6)',
             },
             cream: {
               DEFAULT: '#FFF8F0',
               dark: '#FFF5E9', // for alternating section backgrounds
             },
             sand: '#F5E6D3', // neutral beige for alternating
             error: '#C4463A', // warm terracotta red
           },
           fontFamily: {
             calmius: ['var(--font-calmius)', 'serif'],
           },
           borderRadius: {
             card: '10px', // moderate 8-12px per decisions
           },
           maxWidth: {
             content: '768px', // per decisions: средняя ширина контента
           },
         },
       }
       ```

    4. **Configure font**: Create `src/lib/fonts.ts`. The font "Calmius" is NOT available on Google Fonts. Since CONTEXT.md specifies Calmius Extra Light, use `next/font/local` instead. For now, set up the font loading infrastructure using a fallback approach:
       - Create `src/lib/fonts.ts` that uses `next/font/local` pointing to `public/fonts/` directory
       - If the font file is not available yet, use `next/font/google` with a visually similar serif font as a temporary stand-in (e.g., "Cormorant Garamond" weight 300 which is thin/elegant and similar to Calmius Extra Light). Add a comment: `// TODO: Replace with local Calmius Extra Light when font files provided`
       - Export as `calmius` for consistent naming. Apply CSS variable `--font-calmius`.
       - Note: Per decisions, единый шрифт for whole page, differentiation through size/weight.

    5. **Set up `src/app/globals.css`** with:
       - Tailwind CSS 4 directives (`@import "tailwindcss"` or `@tailwind base/components/utilities` depending on version)
       - CSS custom properties for the color palette (so they work in both Tailwind and raw CSS)
       - Base body styles: `background-color: #FFF8F0`, `color: #3C1518`, font-size `18px` on mobile (per decisions)
       - Paper/linen texture: subtle CSS background pattern. Create a very light repeating noise texture using CSS (or use a tiny base64-encoded subtle paper texture). The effect should be barely visible — like real paper grain. If using an image, place in `public/textures/paper.png`.
       - Smooth scrolling: `scroll-behavior: smooth`
       - Selection color: alexandrite tint

    6. **Set up `src/app/layout.tsx`**:
       - Import font from `src/lib/fonts.ts`, apply to `<html>` or `<body>` className
       - Set metadata: title = "Анна & Михаил" (placeholder names), description for OG
       - Import `globals.css`
       - Set `<html lang="ru">` (per decisions: только русский)

    7. **Set up `src/app/page.tsx`** as a minimal placeholder:
       ```tsx
       export default function Home() {
         return (
           <main className="min-h-screen">
             <h1 className="text-4xl text-center py-20 font-calmius">
               Свадебное приглашение
             </h1>
           </main>
         );
       }
       ```

    8. **Verify**: Run `npm run dev` — page loads at localhost:3000, font applies, cream background visible, no console errors.
  </action>
  <verify>
    Run `npm run dev` (check it starts without errors), then `npm run build` to verify TypeScript compilation succeeds with zero errors. Check that `localhost:3000` renders the placeholder text with the correct font and cream background.
  </verify>
  <done>
    Next.js 15 project runs, Tailwind CSS 4 configured with wedding palette, font loads without FOUT, global styles show cream background with paper texture and dark chocolate text color.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create complete TypeScript type definitions for all wedding data</name>
  <files>
    src/lib/types.ts
  </files>
  <action>
    Create `src/lib/types.ts` with comprehensive type definitions covering ALL data structures needed across the entire project (not just Phase 1). This is the canonical type file that all phases import from.

    Per CONTEXT.md decisions, the data model must support:

    ```ts
    // Section identifiers for SectionDots navigation
    export type SectionId = 'hero' | 'countdown' | 'info' | 'timeline' | 'dresscode' | 'rsvp' | 'map' | 'footer';

    // Hero section (CONT-01 future, defined now)
    export interface HeroData {
      coupleNames: string;          // "Анна & Михаил" (только имена, амперсанд)
      date: string;                 // "15 августа 2026" (дата прописью)
      invitationPhrase: string;     // Поэтичная фраза-приглашение
      backgroundImageDesktop: string; // path to desktop hero photo
      backgroundImageMobile: string;  // path to mobile hero photo
    }

    // Countdown (CONT-02 future)
    export interface CountdownData {
      weddingDate: string;          // ISO date string for countdown target
      timezone: string;             // "Europe/Moscow" (захардкожено per decisions)
      expiredMessage: string;       // "Спасибо, что были с нами!"
    }

    // Info cards "О торжестве" (CONT-03 future)
    export interface InfoCard {
      type: 'when' | 'where';
      title: string;                // "Когда" / "Где"
      lines: string[];              // Multiple lines of text
    }

    // Timeline "Программа дня" (CONT-05 future)
    export interface TimelineEvent {
      time: string;                 // "15:00"
      title: string;                // "Сбор гостей"
      // Note: no description per decisions ("Каждый этап: время + название без описания")
      // Icon mapping is in the component, not in data per decisions
    }

    // Dress code (CONT-04 future)
    export interface ColorSwatch {
      color: string;                // hex color
      name: string;                 // color name in Russian
    }

    export interface DressCodeData {
      description: string;          // Short dress code phrase
      palette: ColorSwatch[];       // 4-5 color swatches
    }

    // RSVP (INTER-02..04 future)
    export type RSVPStatus = 'attending' | 'not-attending';

    export interface RSVPFormData {
      firstName: string;            // Имя (обязательное)
      lastName: string;             // Фамилия (обязательное)
      status: RSVPStatus;           // Приду / Не смогу прийти
      plusOne: boolean;             // Приду с парой (only when attending)
      wishes: string;               // Пожелания (обязательное)
    }

    // Contact for RSVP errors
    export interface ContactInfo {
      phone: string;
      telegramUrl: string;
      whatsappUrl: string;
    }

    // Map (INTER-01 future)
    export interface MapData {
      iframeSrc: string;            // Yandex Maps iframe URL
      address: string;              // Full address text
      coordinates: {
        lat: number;
        lng: number;
      };
      navigationUrl: string;        // Yandex Maps route URL
    }

    // Footer
    export interface FooterData {
      text: string;                 // "Анна & Михаил · 2026"
    }

    // Master wedding data type (separate exports per decisions)
    export interface WeddingData {
      hero: HeroData;
      countdown: CountdownData;
      infoCards: InfoCard[];
      timeline: TimelineEvent[];
      dressCode: DressCodeData;
      rsvp: {
        contact: ContactInfo;
      };
      map: MapData;
      footer: FooterData;
    }

    // Section heading config
    export interface SectionConfig {
      id: SectionId;
      title: string | null;         // null for countdown (no heading per decisions)
    }
    ```

    Ensure ALL types are exported with `export`. Add JSDoc comments in Russian for clarity.
  </action>
  <verify>
    Run `npx tsc --noEmit` — zero TypeScript errors. Verify all types are importable: create a temporary test import or check that `npm run build` succeeds.
  </verify>
  <done>
    All TypeScript types defined in `src/lib/types.ts`, exportable and ready for use. Types cover: WeddingData, HeroData, CountdownData, InfoCard, TimelineEvent, DressCodeData, ColorSwatch, RSVPFormData, RSVPStatus, ContactInfo, MapData, FooterData, SectionId, SectionConfig.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts without errors
2. `npm run build` completes with zero TypeScript errors
3. Browser shows page at localhost:3000 with cream background, paper texture, correct font
4. All types importable from `@/lib/types`
5. Tailwind config includes all wedding palette colors
</verification>

<success_criteria>
- Next.js 15 project initialized with App Router, TypeScript, Tailwind CSS 4, src/ directory
- Calmius font (or close stand-in) loads without FOUT via next/font
- Global styles: cream background #FFF8F0, paper texture, dark chocolate text #3C1518, 18px base font
- Complete TypeScript types exported from src/lib/types.ts covering all wedding data structures
- `npm run build` passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>

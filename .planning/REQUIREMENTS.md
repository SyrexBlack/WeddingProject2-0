# Requirements: Wedding Invitation (Свадебная визитка)

**Defined:** 2026-02-22
**Core Value:** Гость открывает ссылку из мессенджера, видит красивое приглашение со всей информацией и может подтвердить своё участие в один клик.

## v1 Requirements (Milestone v1.0 — Complete)

### Фундамент (Foundation)

- [x] **FOUND-01**: Проект инициализирован на Next.js 16 (App Router) с TypeScript, Tailwind CSS 4, src-директорией
- [x] **FOUND-02**: Настроены шрифты через `next/font/google` без FOUT (заголовочный + текстовый шрифт)
- [x] **FOUND-03**: Создан `lib/constants.ts` с типизированными данными свадьбы (имена, дата, место, программа, дресс-код)
- [x] **FOUND-04**: Создана система типов TypeScript для всех данных (WeddingData, TimelineEvent, RSVPFormData)
- [x] **FOUND-05**: Настроены базовые UI-компоненты (Container, Button, Card, AnimatedSection)

### Контент (Content Sections)

- [x] **CONT-01**: Hero-секция отображает имена пары, дату свадьбы и полноэкранное фоновое фото
- [x] **CONT-02**: Обратный отсчёт показывает дни, часы, минуты, секунды до свадьбы с корректным timezone
- [x] **CONT-03**: Информационная секция отображает карточки «Где», «Когда» с иконками Lucide
- [x] **CONT-04**: Секция дресс-кода отображает текст и цветовую палитру свадьбы
- [x] **CONT-05**: Секция программы дня отображает вертикальный таймлайн с временем и описанием каждого этапа
- [x] **CONT-07**: Footer отображает контактную информацию и копирайт

### Интерактив (Interactive Features)

- [x] **INTER-01**: Интерактивная карта (Яндекс.Карты iframe) показывает место проведения с возможностью построить маршрут
- [x] **INTER-02**: RSVP-форма принимает имя, статус участия (приду/не приду/+1) и пожелания
- [x] **INTER-03**: RSVP-форма отправляет данные через EmailJS без бэкенда
- [x] **INTER-04**: RSVP-форма показывает состояния: загрузка, успех, ошибка с визуальной обратной связью
- [x] **INTER-05**: Секции появляются с анимацией fade-in при скролле через Framer Motion

### Оптимизация и деплой (Polish & Deploy)

- [x] **DEPLOY-01**: Open Graph теги настроены — при отправке ссылки в Telegram/WhatsApp отображается карточка с фото и заголовком
- [x] **DEPLOY-02**: Все изображения оптимизированы через `next/image` (WebP, lazy loading, blur placeholder)
- [x] **DEPLOY-03**: Сайт корректно отображается на мобильных устройствах (от 320px) — mobile-first
- [x] **DEPLOY-04**: Сайт задеплоен на Vercel с HTTPS и доступен по публичному URL
- [x] **DEPLOY-05**: Lighthouse Performance score > 90 на мобильном

## v2 Requirements (Milestone v2.0 — Active)

Требования для текущего milestone. Каждое привязано к фазе роадмапа.

### Firebase (База данных)

- [ ] **FB-01**: RSVP данные сохраняются в Firebase Firestore при отправке формы
- [ ] **FB-02**: Firestore Security Rules разрешают только создание документов (гости не могут читать/удалять чужие)
- [ ] **FB-03**: EmailJS остаётся — форма отправляет параллельно в Firestore и EmailJS

### API (Серверная часть)

- [ ] **API-01**: Next.js API Route `/api/rsvp` принимает данные формы и записывает в Firestore
- [ ] **API-02**: API Route отправляет уведомление в Telegram при каждом новом RSVP
- [ ] **API-03**: API Route для Telegram webhook обрабатывает команды бота

### Telegram Bot (Бот для организатора)

- [ ] **BOT-01**: Бот отправляет уведомление организатору при каждом заполнении RSVP (имя, статус, пожелания)
- [ ] **BOT-02**: Команда — показать список всех гостей с inline-кнопками
- [ ] **BOT-03**: По нажатию на кнопку гостя — показать все данные этого гостя
- [ ] **BOT-04**: Бот доступен только организатору (проверка chat ID)

## v3 Requirements (Deferred)

Отложены. Добавляются после стабильного v2.

### Расширенные фичи (Enhanced Features)

- **ENHANCE-01**: Персонализация через URL-параметры — каждый гость видит своё имя в приглашении (`?to=base64(Имя)`)
- **ENHANCE-02**: Анимация «Открыть приглашение» — конверт раскрывается при первом посещении
- **ENHANCE-03**: Фоновая музыка с кнопкой play/pause (не автовоспроизведение)
- **ENHANCE-04**: Конфетти/частицы при открытии приглашения (canvas-confetti)
- **ENHANCE-05**: Кнопка «Добавить в календарь» — генерация .ics файла и ссылки Google Calendar
- **ENHANCE-06**: Кнопки шеринга через мессенджеры (WhatsApp, Telegram, копировать ссылку)
- **ENHANCE-07**: Параллакс-эффекты на Hero и между секциями

### Будущее (Future)

- **FUTURE-01**: Таймлайн «Наша история любви» с ключевыми датами
- **FUTURE-02**: Гостевая книга — пожелания с отображением на сайте
- **FUTURE-03**: Переключение светлой/тёмной темы

## Out of Scope

Явно исключено. Документировано для предотвращения расширения скоупа.

| Feature | Reason |
|---------|--------|
| Аутентификация/логин гостей | Трение при открытии; гости не будут регистрироваться ради приглашения |
| CMS/админ-панель | One-time сайт, контент статический в `constants.ts` |
| Реал-тайм чат | Модерация, серверные затраты; есть WhatsApp/Telegram-группы |
| Платёжная система | Юридические сложности, комиссии; реквизиты текстом |
| Мультиязычность (i18n) | Аудитория русскоязычная; сайт на одном языке |
| Firebase Cloud Functions | Используем Next.js API Routes — проще, без дополнительных сервисов |
| Web-дашборд гостей | Telegram бот заменяет |
| Firebase Auth на сайте | Гостям не нужна авторизация |
| Бот для гостей | Бот только для организатора |
| Статистика/экспорт в боте | Минимальный бот, без усложнений |
| Long-polling бот | Webhook через Vercel API Route |
| Загрузка фото от гостей | Хранилище, модерация; ссылка на Google Photos альбом |
| Мобильное приложение | Только веб; mobile-first достаточно |
| Docker/контейнеризация | Деплой на Vercel без контейнеров |

## Traceability

Какие фазы покрывают какие требования. Обновляется при создании роадмапа.

### v1 Requirements → Phases (Complete)

| Требование | Фаза | Статус |
|------------|------|--------|
| FOUND-01..05 | Phase 1 | ✓ Complete |
| CONT-01,03,04,05,07 | Phase 2 | ✓ Complete |
| CONT-02, INTER-05 | Phase 3 | ✓ Complete |
| INTER-01..04 | Phase 4 | ✓ Complete |
| DEPLOY-01..05 | Phase 5 | ✓ Complete |

### v2 Requirements → Phases

| Требование | Фаза | Описание фазы | Статус |
|------------|------|---------------|--------|
| FB-01 | TBD | — | Pending |
| FB-02 | TBD | — | Pending |
| FB-03 | TBD | — | Pending |
| API-01 | TBD | — | Pending |
| API-02 | TBD | — | Pending |
| API-03 | TBD | — | Pending |
| BOT-01 | TBD | — | Pending |
| BOT-02 | TBD | — | Pending |
| BOT-03 | TBD | — | Pending |
| BOT-04 | TBD | — | Pending |

### Покрытие

- **v1 требований:** 21 — все Complete ✓
- **v2 требований:** 10 — все Pending
- **Непокрыто:** 0 (после создания роадмапа)

---
*Требования определены: 2026-02-22*
*Последнее обновление: 2026-02-24 после старта Milestone v2.0*
